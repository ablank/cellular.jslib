(function(d){Drupal.ajax=Drupal.ajax||{};Drupal.behaviors.AJAX={attach:function(c,a){for(var b in a.ajax)if(!d("#"+b+".ajax-processed").length){var e=a.ajax[b];"undefined"==typeof e.selector&&(e.selector="#"+b);d(e.selector).each(function(){e.element=this;Drupal.ajax[b]=new Drupal.ajax(b,this,e)});d("#"+b).addClass("ajax-processed")}d(".use-ajax:not(.ajax-processed)").addClass("ajax-processed").each(function(){var a={progress:{type:"throbber"}};d(this).attr("href")&&(a.url=d(this).attr("href"),a.event=
"click");var b=d(this).attr("id");Drupal.ajax[b]=new Drupal.ajax(b,this,a)});d(".use-ajax-submit:not(.ajax-processed)").addClass("ajax-processed").each(function(){var a={};a.url=d(this.form).attr("action");a.setClick=!0;a.event="click";a.progress={type:"throbber"};var b=d(this).attr("id");Drupal.ajax[b]=new Drupal.ajax(b,this,a)})}};Drupal.ajax=function(c,a,b){c={url:"system/ajax",event:"mousedown",keypress:!0,selector:"#"+c,effect:"none",speed:"none",method:"replaceWith",progress:{type:"throbber",
message:Drupal.t("Please wait...")},submit:{js:!0}};d.extend(this,c,b);this.element=a;this.element_settings=b;this.url=b.url.replace(/\/nojs(\/|$|\?|&|#)/g,"/ajax$1");this.wrapper="#"+b.wrapper;this.element.form&&(this.form=d(this.element.form));var e=this;e.options={url:e.url,data:e.submit,beforeSerialize:function(a,b){return e.beforeSerialize(a,b)},beforeSubmit:function(a,b,c){e.ajaxing=!0;return e.beforeSubmit(a,b,c)},beforeSend:function(a,b){e.ajaxing=!0;return e.beforeSend(a,b)},success:function(a,
b){"string"==typeof a&&(a=d.parseJSON(a));return e.success(a,b)},complete:function(a,b){e.ajaxing=!1;if("error"==b||"parsererror"==b)return e.error(a,e.url)},dataType:"json",type:"POST"};d(e.element).bind(b.event,function(a){return e.eventResponse(this,a)});b.keypress&&d(e.element).keypress(function(a){return e.keypressResponse(this,a)});b.prevent&&d(e.element).bind(b.prevent,!1)};Drupal.ajax.prototype.keypressResponse=function(c,a){if(13==a.which||32==a.which&&"text"!=c.type&&"textarea"!=c.type)return d(this.element_settings.element).trigger(this.element_settings.event),
!1};Drupal.ajax.prototype.eventResponse=function(c,a){if(this.ajaxing)return!1;try{this.form?(this.setClick&&(c.form.clk=c),this.form.ajaxSubmit(this.options)):(this.beforeSerialize(this.element,this.options),d.ajax(this.options))}catch(b){this.ajaxing=!1,alert("An error occurred while attempting to process "+this.options.url+": "+b.message)}return"undefined"==typeof c.type||"checkbox"!=c.type&&"radio"!=c.type?!1:!0};Drupal.ajax.prototype.beforeSerialize=function(c,a){this.form&&Drupal.detachBehaviors(this.form,
this.settings||Drupal.settings,"serialize");a.data["ajax_html_ids[]"]=[];d("[id]").each(function(){a.data["ajax_html_ids[]"].push(this.id)});a.data["ajax_page_state[theme]"]=Drupal.settings.ajaxPageState.theme;a.data["ajax_page_state[theme_token]"]=Drupal.settings.ajaxPageState.theme_token;for(var b in Drupal.settings.ajaxPageState.css)a.data["ajax_page_state[css]["+b+"]"]=1;for(b in Drupal.settings.ajaxPageState.js)a.data["ajax_page_state[js]["+b+"]"]=1};Drupal.ajax.prototype.beforeSubmit=function(c,
a,b){};Drupal.ajax.prototype.beforeSend=function(c,a){if(this.form){a.extraData=a.extraData||{};a.extraData.ajax_iframe_upload="1";var b=d.fieldValue(this.element);null!==b&&(a.extraData[this.element.name]=Drupal.checkPlain(b))}d(this.element).addClass("progress-disabled").attr("disabled",!0);"bar"==this.progress.type?(b=new Drupal.progressBar("ajax-progress-"+this.element.id,eval(this.progress.update_callback),this.progress.method,eval(this.progress.error_callback)),this.progress.message&&b.setProgress(-1,
this.progress.message),this.progress.url&&b.startMonitoring(this.progress.url,this.progress.interval||1500),this.progress.element=d(b.element).addClass("ajax-progress ajax-progress-bar"),this.progress.object=b,d(this.element).after(this.progress.element)):"throbber"==this.progress.type&&(this.progress.element=d('<div class="ajax-progress ajax-progress-throbber"><div class="throbber">&nbsp;</div></div>'),this.progress.message&&d(".throbber",this.progress.element).after('<div class="message">'+this.progress.message+
"</div>"),d(this.element).after(this.progress.element))};Drupal.ajax.prototype.success=function(c,a){this.progress.element&&d(this.progress.element).remove();this.progress.object&&this.progress.object.stopMonitoring();d(this.element).removeClass("progress-disabled").removeAttr("disabled");Drupal.freezeHeight();for(var b in c)if(c.hasOwnProperty(b)&&c[b].command&&this.commands[c[b].command])this.commands[c[b].command](this,c[b],a);this.form&&Drupal.attachBehaviors(this.form,this.settings||Drupal.settings);
Drupal.unfreezeHeight();this.settings=null};Drupal.ajax.prototype.getEffect=function(c){var a=c.effect||this.effect;c=c.speed||this.speed;var b={};"none"==a?(b.showEffect="show",b.hideEffect="hide",b.showSpeed=""):("fade"==a?(b.showEffect="fadeIn",b.hideEffect="fadeOut"):(b.showEffect=a+"Toggle",b.hideEffect=a+"Toggle"),b.showSpeed=c);return b};Drupal.ajax.prototype.error=function(c,a){alert(Drupal.ajaxError(c,a));this.progress.element&&d(this.progress.element).remove();this.progress.object&&this.progress.object.stopMonitoring();
d(this.wrapper).show();d(this.element).removeClass("progress-disabled").removeAttr("disabled");this.form&&Drupal.attachBehaviors(this.form,c.settings||this.settings||Drupal.settings)};Drupal.ajax.prototype.commands={insert:function(c,a,b){b=a.selector?d(a.selector):d(c.wrapper);var e=a.method||c.method,g=c.getEffect(a),h=d("<div></div>").html(a.data),f=h.contents();if(1!=f.length||1!=f.get(0).nodeType)f=h;switch(e){case "html":case "replaceWith":case "replaceAll":case "empty":case "remove":h=a.settings||
c.settings||Drupal.settings,Drupal.detachBehaviors(b,h)}b[e](f);"show"!=g.showEffect&&f.hide();if(0<d(".ajax-new-content",f).length)d(".ajax-new-content",f).hide(),f.show(),d(".ajax-new-content",f)[g.showEffect](g.showSpeed);else if("show"!=g.showEffect)f[g.showEffect](g.showSpeed);0<f.parents("html").length&&(h=a.settings||c.settings||Drupal.settings,Drupal.attachBehaviors(f,h))},remove:function(c,a,b){c=a.settings||c.settings||Drupal.settings;Drupal.detachBehaviors(d(a.selector),c);d(a.selector).remove()},
changed:function(c,a,b){d(a.selector).hasClass("ajax-changed")||(d(a.selector).addClass("ajax-changed"),a.asterisk&&d(a.selector).find(a.asterisk).append(' <span class="ajax-changed">*</span> '))},alert:function(c,a,b){alert(a.text,a.title)},css:function(c,a,b){d(a.selector).css(a.argument)},settings:function(c,a,b){a.merge?d.extend(!0,Drupal.settings,a.settings):c.settings=a.settings},data:function(c,a,b){d(a.selector).data(a.name,a.value)},invoke:function(c,a,b){c=d(a.selector);c[a.method].apply(c,
a.arguments)},restripe:function(c,a,b){d("> tbody > tr:visible, > tr:visible",d(a.selector)).removeClass("odd even").filter(":even").addClass("odd").end().filter(":odd").addClass("even")},add_css:function(c,a,b){d("head").prepend(a.data);b=/^@import url\("(.*)"\);$/igm;if(document.styleSheets[0].addImport&&b.test(a.data))for(b.lastIndex=0;c=b.exec(a.data);)document.styleSheets[0].addImport(c[1])},updateBuildId:function(c,a,b){d('input[name="form_build_id"][value="'+a.old+'"]').val(a["new"])}}})(jQuery);